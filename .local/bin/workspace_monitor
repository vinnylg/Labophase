#!/bin/bash
# Monitora mudanÃ§as de workspace via DBus
dbus-monitor --profile "interface='org.gnome.Shell',member='ActiveWorkspaceChanged'" |
while read -r line; do
  if [[ $line == *"ActiveWorkspaceChanged"* ]]; then
    CURRENT_WS=$(wmctrl -d | grep '*' | cut -d ' ' -f1)
    echo $CURRENT_WS > $HOME/.local/state/last_workspace
  fi
done